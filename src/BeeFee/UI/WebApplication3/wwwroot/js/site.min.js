function initEventEdit(){function n(n,t){var i="",r="";i+=t.getDate()+"/";i+=t.getMonth()+1+"/";i+=t.getFullYear();r+=t.getHours()<=9?"0"+t.getHours():t.getHours()+":";r+=t.getMinutes()<=9?"0"+t.getMinutes():t.getMinutes();n.find("span.is-s1").html(i);n.find("span.is-s2").html(r)}$(".html-editor").length>0&&CKEDITOR.replace($(".html-editor")[0]);$('[data-range="start"]').datetimepicker({onChangeDateTime:function(t,i){n(i.closest(".create--field-di"),t)},step:15});$('[data-range="end"]').datetimepicker({onChangeDateTime:function(t,i){n(i.closest(".create--field-di"),t)},step:15});$('[data-range="start"]').length>0&&$('[data-range="start"]').val().length>0&&n($('[data-range="start"]').closest(".create--field-di"),$('[data-range="start"]').data("xdsoft_datetimepicker").getValue());$('[data-range="end"]').length>0&&$('[data-range="end"]').val().length>0&&n($('[data-range="end"]').closest(".create--field-di"),$('[data-range="end"]').data("xdsoft_datetimepicker").getValue())}function initFixedBox(){var n=$("div[data-fixed-wrap]>.container");n.length!=0&&(topFixed=n.offset().top+n.outerHeight(),prevTop=$(this).scrollTop(),prevShowTop=prevTop,$(window).scroll(function(){var n=$(this).scrollTop();if(n>prevTop||n<topFixed){$(".fixed-box").removeClass("is-shown");prevTop=n;return}n<prevTop&&(n>=topFixed&&n+2<prevTop&&($(".fixed-box").hasClass("is-shown")||$(".fixed-box").addClass("is-shown").slideDown(200)),prevTop=n);$(".fixed-box").hasClass("is-shown")||(prevTop=n)}))}var topFixed,prevTop=0,prevShowTop=0;$(document).ready(function(){function n(n){var t=[];$.each(n.find('.select_list_checkbox input[type="checkbox"]:checked'),function(n,i){var r=$(i).data("checkboxes");(r==undefined||r!="total")&&t.push($(i).next().text().trim())});t.length>0?(n.find(".select_title div").text(t.join(", ")),n.find(".select_placeholder").hide()):(n.find(".select_title div").text(""),n.find(".select_placeholder").show())}$('a[href="#"]').on({click:function(n){n.preventDefault()}});try{$.validator.methods.number=function(n,t){var i=n.replace(",",".")*1;return this.optional(t)||$.isNumeric(i)}}catch(t){}initLoginDialog();initFixedBox();$('[data-goto="filter"]').on({click:function(n){n.preventDefault();$("html, body").scrollTop($(".filter").offset().top-$('[data-fixed="header"]').outerHeight());$('[data-toggle="filter"]').addClass("is-active");$(".filter--body").slideDown(200,function(){$(this).is(":visible")&&$(this).find('input[type="text"]').first().focus()})}});$(".js-modals-close").on({click:function(n){n.preventDefault();$(".modals, .modals--item").fadeOut(200)}});$(".js-modals-open").on({click:function(n){n.preventDefault();var t=$(this).attr("modal-id");$(".modals").fadeIn(200);$(".modals--item#"+t).fadeIn(200,function(){$(this).find('input[type="text"]').first().focus()})}});$('[data-toggle="filter"]').on({click:function(n){n.preventDefault();$('[data-toggle="filter"]').toggleClass("is-active");$(".filter--body").slideToggle(200,function(){$(this).is(":visible")&&$(this).find('input[type="text"]').first().focus()})}});$(document).on("focus",".input-field",function(){$(this).addClass("with-focus")});$(document).on("blur",".input-field",function(){$(".input-field--i",this).val()===""&&$(this).removeClass("with-focus")});$(document).on("keyup",".input-field",function(){var n=$(this);n.removeClass("with-error");$(".input-field--i",this).val()!=""?n.addClass("with-value"):n.removeClass("with-value")});$(document).on("change",".input-field",function(){var n=$(this);n.removeClass("with-error");$(".input-field--i",this).val()!=""?n.addClass("with-value"):n.removeClass("with-value")});$.each($('.input-field input[type="text"]'),function(n,t){$(t).val().length>0&&$(t).trigger("change")});$("input[name=Phone]").mask("+7 (999) 999-9999",{placeholder:"+7 (___) ___-____"});$(".vertical-field").each(function(){var n=$(this),t=$(this).find(".vertical-field--i");t.on({focus:function(){n.addClass("with-focus")},blur:function(){n.removeClass("with-focus")},keyup:function(){n.removeClass("with-error");$(this).val()!=""?n.addClass("with-value"):n.removeClass("with-value")}})});$(".select_in, .select_in_checkbox").on("click",function(){var n=$(this),t=n.closest(".select"),i=t.find(".select_list, .select_list_checkbox");i.is(":visible")?(i.slideUp(200),t.removeClass("is-opened"),n.find(".select_arrow").removeClass("is-active")):($(".select .select_list:visible, .select .select_list_checkbox:visible").length&&($(".select .select_list:visible, .select .select_list_checkbox:visible").hide(),$(".select .select_arrow").removeClass("is-active")),i.slideDown(200),t.addClass("is-opened"),n.find(".arrow").addClass("is-active"))});$(".select_list li").on("click",function(){var n=$(this),t=n.closest(".select").find(".select_in .select_title"),i=n.html();t.html(i);n.closest(".select").find("input[type=hidden]").val(n.attr("data-value"));n.closest(".select_list").find("li").removeClass("is-active");n.addClass("is-active");n.closest(".select_list").slideUp(200);n.closest(".select").removeClass("is-opened");n.closest(".select").find(".select_arrow").removeClass("is-active")});$(document).on("click",function(n){$(".select .select_list:visible, .select .select_list_checkbox:visible").length&&!$(n.target).closest(".select").length&&($(".select").removeClass("is-opened"),$(".select .select_list, .select .select_list_checkbox").slideUp(200),$(".select .select_arrow").removeClass("is-active"))});$(document).keyup(function(n){n.keyCode==27&&($(".select").removeClass("is-opened"),$(".select .select_list, .select .select_list_checkbox").slideUp(200))});$(".create--file-i").on("change",function(){$(this).parent().find(".create--file-b").html($(this).val().split("\\").pop())});$.datetimepicker.setLocale("ru");$(".js-date").datetimepicker({timepicker:!1,format:"d.m.Y"});$('[data-checkboxes="total"]').on("change",function(){$(this).closest(".input-field--c, .vertical-field--c, .vertical-field").find("input").prop("checked",$(this).prop("checked"));n($(this).closest(".select"))});$('.input-field--c input, .vertical-field--c input, .vertical-field input[type="checkbox"]').on("change",function(){var n=!0,t=$(this).closest(".input-field--c, .vertical-field--c, .vertical-field"),i=t.find('[data-checkboxes="total"]');t.find('input[type="checkbox"]').not(i).each(function(){if($(this).prop("checked")==!1){n=!1;return}});i.prop("checked",n)});$('.select_list_checkbox input[type="checkbox"]').on("change",function(){n($(this).closest(".select"))});$.each($(".select_list_checkbox"),function(t,i){n($(i).closest(".select"))})});